<ul class="posts" style="list-style: none; padding: 0">
  {% for post in posts %}
  <li
    class="post"
    style="
      border: 1px solid #ddd;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 5px;
    "
  >
    <div style="display: flex; align-items: center; margin-bottom: 10px">
      <a href="{{ url_for('.user', username=post.author.username) }}">
        <img
          class="img-rounded"
          src="{{ post.author.gravatar(size=40) }}"
          style="margin-right: 10px"
        />
      </a>
      <div class="post-content">
        <div class="post-author" style="font-weight: bold">
          <a href="{{ url_for('.user', username=post.author.username) }}">
            {{ post.author.username }}
          </a>
        </div>
        <div class="post-date" style="font-size: 0.9em; color: #999">
          {{ moment(post.timestamp).fromNow() }}
        </div>
      </div>
    </div>
    <!--The | safe suffix when rendering the HTML body is there to tell Jinja2 not to escape the HTML elements. 
                  Jinja2 escapes all template variables by default as a security measure,
        but the Markdown-generated HTML was generated by the server, so it is safe to render directly as HTML.-->
    <div class="post-body" style="margin-left: 48px; min-height: 10px">
      {% if post.body_html %} {{ post.body_html | safe }} {% else %} {{
      post.body }} {% endif %}
    </div>
    <div class="post-footer" style="text-align: right">
      <a href="{{ url_for('.post', id=post.id) }}">
        <span class="label label-default">Permalink</span>
      </a>
      {% if current_user == post.author %}
      <a href="{{ url_for('.edit', id=post.id) }}">
        <span class="label label-primary">Edit</span>
      </a>
      {% elif current_user.is_administrator() %}
      <a href="{{ url_for('.edit', id=post.id) }}">
        <span class="label label-danger">Edit [Admin]</span>
      </a>
      {% endif %}
    </div>
  </li>
  {% endfor %}
</ul>
